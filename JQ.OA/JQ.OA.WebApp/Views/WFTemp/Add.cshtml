@model JQ.QA.Model.WF_Temp
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Add</title>
    <link href="~/Scripts/kindeditor-4.0.5/themes/default/default.css" rel="stylesheet" />
    <link href="~/Scripts/kindeditor-4.0.5/themes/default/default.css" rel="stylesheet" />
    <link href="~/Scripts/kindeditor-4.0.5/plugins/code/prettify.css" rel="stylesheet" />
    <script src="~/Scripts/kindeditor-4.0.5/kindeditor.js"></script>
    <script src="~/Scripts/kindeditor-4.0.5/lang/zh_CN.js"></script>
    <script src="~/Scripts/jquery-1.7.1.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>

    <script type="text/javascript">
        var editor1;
        var editor2;
        function initKindEditor(K, editor, elemId) {
            editor = K.create(elemId, {
                cssPath: '../../Scripts/kindeditor-4.0.5/plugins/code/prettify.css',
                uploadJson: '../../Scripts/kindeditor-4.0.5/asp.net/upload_json.ashx',
                fileManagerJson: '../../Scripts/kindeditor-4.0.5/asp.net/FileManagerJson.ashx',
                allowFileManager: false,
                filterMode: true,
                afterCreate: function () {
                    var self = this;
                    K.ctrl(document, 13, function () {
                        self.sync();
                        //K('form[name=example]')[0].submit();
                    });
                    K.ctrl(self.edit.doc, 13, function () {
                        self.sync();
                        //K('form[name=example]')[0].submit();
                    });

                }
            });
            prettyPrint();
        };
        //KindEditor.ready(function (K) { initKindEditor(K, editor1, '#Description') });
        //KindEditor.ready(function (K) { initKindEditor(K, editor2, '#FormTemp') });


        //Call by parent window
        function submitFrm() {
            $("form").submit();
        }


        function afterAdd(data) {
            window.parent.window.afterAddSuccess(data);
        }

    </script>
</head>
<body>
    <div>
        @using (Ajax.BeginForm(new AjaxOptions() { HttpMethod = "Post", OnSuccess = "afterAdd" }))
        {
        <table>
            <tr>
                <td>Template Name</td>
                <td>@Html.EditorFor(m => m.TempName)</td>
            </tr>

            <tr>
                <td>Workflow Type</td>
                <td>@Html.EditorFor(m => m.ActivityType) </td>
            </tr>

            <tr>
                <td>Template Description</td>
                <td>
                    @Html.TextAreaFor(m => m.Description)
                </td>
            </tr>

            <tr>
                <td>Template Form</td>
                <td>
                    @Html.TextAreaFor(m => m.FormTemp)
                </td>
            </tr>

            @*<tr>
            <td>Template Description</td>
            <td>
                    <textarea cols="80" rows="5" name="Description" id="Description" style="width: 100%; height: 200px;
            visibility: hidden;" runat="server">
            </textarea>
            </td>
        </tr>

            <tr>
                <td>Template Form</td>
                <td>
                    <textarea cols="80" rows="12" name="FormTemp" id="FormTemp"
                              style="width:100%; height:100%; visibility:hidden" , runat="server">
                    </textarea>
                </td>
            </tr>*@
        </table>
        }
    </div>
</body>
</html>
